<!doctype html>
<html lang=pl>
<head>
    <meta charset=utf-8>
    <title>Cash Register</title>
    <link href='http://fonts.googleapis.com/css?family=Rajdhani:300,400,500,600,700' rel='stylesheet' type='text/css'>
    <style type='text/css'>

    body { 
        background-color: #FFFFFF;
        color: #000000;
        font-size: 22px;
        font-family: 'Rajdhani', sans-serif;
        text-align: center; 
    }

    </style>
</head>
<body>

    <section id="p">
        
    </section>

    <script type="text/javascript">

        function StaffMember(name, discountPercent){
            this.name = name;
            this.discountPercent = discountPercent;
        }

        var sally = new StaffMember('Sally', 5);
        var bob = new StaffMember('Bob', 10);

        var me = new StaffMember('Pio', 20);


        var cashRegister = {
            total: 0,
            lastTransactionAmount: 0,
            add: function(itemCost){
                this.total += (itemCost || 0);
                this.lastTransactionAmount = itemCost;
            },
            scan: function(item, quantity){
                switch (item){
                case "eggs": this.add(0.98 * quantity); break;
                case "milk": this.add(1.23 * quantity); break;
                case "magazine": this.add(4.99 * quantity); break;
                case "chocolate": this.add(0.45 * quantity); break;
                }
                return true;
            },
            voidLastTransaction : function(){
                this.total -= this.lastTransactionAmount;
                this.lastTransactionAmount = 0;
            },
            applyStaffDiscount: function(employee) {
                this.total -= this.total * (employee.discountPercent / 100);
            }
        };

        cashRegister.scan('eggs', 1);
        cashRegister.scan('milk', 1);
        cashRegister.scan('magazine', 3);

        cashRegister.applyStaffDiscount(me);

        // Show the total bill
        console.log('Your bill is ' + cashRegister.total.toFixed(2));

        function getData (url) {
            var request = new XMLHttpRequest(),
                p = document.getElementById('p');
            request.onreadystatechange = function () {
                if (request.readyState !== 4) {
                    return false;
                }
                if (request.status !== 200) {
                    console.log("Error, status code: " + request.status);
                    return false;
                }
                p.innerHTML = request.responseText;
            };
            request.open('GET', url, true);
            request.send('');
        };

        getData('http://localhost:8080/films.txt');

    </script>
    
</body>
</html>
